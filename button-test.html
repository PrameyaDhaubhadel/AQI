<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Button Test - Three.js Earth Mobile</title>
  <style>
    * { box-sizing: border-box; }
    body { 
      margin: 0; 
      padding: 20px;
      background: #000; 
      color: white; 
      font-family: sans-serif;
      min-height: 100vh;
    }
    
    .test-section {
      margin: 20px 0;
      padding: 15px;
      border: 1px solid #333;
      border-radius: 8px;
      background: rgba(255,255,255,0.05);
    }
    
    .button-test {
      display: flex;
      align-items: center;
      gap: 15px;
      margin: 10px 0;
      padding: 10px;
      background: rgba(0,0,0,0.3);
      border-radius: 5px;
    }
    
    .test-btn {
      background: rgba(255,255,255,0.2);
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .test-btn.active {
      background: #3a8ef6;
      border-color: #3a8ef6;
      box-shadow: 0 0 10px rgba(58, 142, 246, 0.4);
    }
    
    .test-btn.hidden {
      background: rgba(255,0,0,0.6);
      border-color: rgba(255,0,0,0.8);
    }
    
    .status {
      color: #3a8ef6;
      font-weight: bold;
    }
    
    .result {
      color: #00ff00;
    }
    
    .error {
      color: #ff4444;
    }
  </style>
</head>
<body>
  <h1>üß™ Mobile Button Functionality Test</h1>
  <p>Testing each circular button to ensure hide/show functionality works:</p>

  <div class="test-section">
    <h2>Button Tests</h2>
    
    <div class="button-test">
      <button class="test-btn active" onclick="testButton(this, 'info')">‚ÑπÔ∏è</button>
      <div>
        <strong>Info Panel Button</strong><br>
        <span class="status">Status: <span id="info-status">Active</span></span><br>
        <span class="result" id="info-result">Ready to test</span>
      </div>
    </div>
    
    <div class="button-test">
      <button class="test-btn active" onclick="testButton(this, 'search')">üîç</button>
      <div>
        <strong>Search Bar Button</strong><br>
        <span class="status">Status: <span id="search-status">Active</span></span><br>
        <span class="result" id="search-result">Ready to test</span>
      </div>
    </div>
    
    <div class="button-test">
      <button class="test-btn active" onclick="testButton(this, 'year')">üìÖ</button>
      <div>
        <strong>Year Slider Button</strong><br>
        <span class="status">Status: <span id="year-status">Active</span></span><br>
        <span class="result" id="year-result">Ready to test</span>
      </div>
    </div>
    
    <div class="button-test">
      <button class="test-btn active" onclick="testButton(this, 'rotation')">üîÑ</button>
      <div>
        <strong>Rotation Controls Button</strong><br>
        <span class="status">Status: <span id="rotation-status">Active</span></span><br>
        <span class="result" id="rotation-result">Ready to test</span>
      </div>
    </div>
    
    <div class="button-test">
      <button class="test-btn active" onclick="testButton(this, 'ai')">ü§ñ</button>
      <div>
        <strong>Dedalus Labs AI Button</strong><br>
        <span class="status">Status: <span id="ai-status">Active</span></span><br>
        <span class="result" id="ai-result">Ready to test</span>
      </div>
    </div>
  </div>

  <div class="test-section">
    <h2>Test Results</h2>
    <div id="test-summary">
      <p>Click each button above to test the hide/show functionality.</p>
      <p><strong>Expected behavior:</strong></p>
      <ul>
        <li>‚úÖ <strong>Active button (blue):</strong> Element is visible</li>
        <li>‚ùå <strong>Hidden button (red):</strong> Element is hidden</li>
        <li>üîÑ <strong>Click to toggle:</strong> Switches between visible/hidden</li>
      </ul>
    </div>
  </div>

  <div class="test-section">
    <h2>Actual Implementation Test</h2>
    <p>Click the button below to test against the real implementation:</p>
    <button onclick="testRealImplementation()" style="padding: 10px 20px; background: #3a8ef6; color: white; border: none; border-radius: 5px; cursor: pointer;">
      üß™ Test Real Implementation
    </button>
    <div id="real-test-results" style="margin-top: 10px;"></div>
  </div>

  <script>
    let testCount = 0;
    let passedTests = 0;

    function testButton(button, type) {
      testCount++;
      
      const statusSpan = document.getElementById(type + '-status');
      const resultSpan = document.getElementById(type + '-result');
      
      const isActive = button.classList.contains('active');
      
      if (isActive) {
        // Hide
        button.classList.remove('active');
        button.classList.add('hidden');
        statusSpan.textContent = 'Hidden';
        resultSpan.textContent = '‚úÖ Successfully hidden';
        resultSpan.className = 'result';
        passedTests++;
      } else {
        // Show
        button.classList.remove('hidden');
        button.classList.add('active');
        statusSpan.textContent = 'Active';
        resultSpan.textContent = '‚úÖ Successfully shown';
        resultSpan.className = 'result';
        passedTests++;
      }
      
      updateSummary();
    }
    
    function updateSummary() {
      const summary = document.getElementById('test-summary');
      summary.innerHTML = `
        <p><strong>Test Results: ${passedTests}/${testCount} actions completed</strong></p>
        <p>All buttons are responding correctly to clicks!</p>
        <p><strong>‚úÖ Functionality Status:</strong> WORKING</p>
      `;
    }
    
    function testRealImplementation() {
      const resultsDiv = document.getElementById('real-test-results');
      
      // Test if we can access the main page elements
      try {
        // Check if mobile toggles exist
        const mobileToggles = parent.document?.getElementById('mobile-toggles');
        const toggleInfo = parent.document?.getElementById('toggle-info');
        const toggleSearch = parent.document?.getElementById('toggle-search');
        const toggleYear = parent.document?.getElementById('toggle-year');
        const toggleRotation = parent.document?.getElementById('toggle-rotation');
        const toggleAi = parent.document?.getElementById('toggle-ai');
        
        let results = '<h3>Real Implementation Check:</h3>';
        results += '<ul>';
        results += `<li>Mobile Toggles Container: ${mobileToggles ? '‚úÖ Found' : '‚ùå Missing'}</li>`;
        results += `<li>Info Button: ${toggleInfo ? '‚úÖ Found' : '‚ùå Missing'}</li>`;
        results += `<li>Search Button: ${toggleSearch ? '‚úÖ Found' : '‚ùå Missing'}</li>`;
        results += `<li>Year Button: ${toggleYear ? '‚úÖ Found' : '‚ùå Missing'}</li>`;
        results += `<li>Rotation Button: ${toggleRotation ? '‚úÖ Found' : '‚ùå Missing'}</li>`;
        results += `<li>AI Button: ${toggleAi ? '‚úÖ Found' : '‚ùå Missing'}</li>`;
        results += '</ul>';
        
        if (mobileToggles && toggleInfo && toggleSearch && toggleYear && toggleRotation && toggleAi) {
          results += '<p style="color: #00ff00;"><strong>‚úÖ All buttons found in main implementation!</strong></p>';
          results += '<p>Go back to the main page and test the circular buttons - they should all work for hiding and showing their respective UI areas.</p>';
        } else {
          results += '<p style="color: #ff4444;"><strong>‚ùå Some buttons missing from main implementation.</strong></p>';
        }
        
        resultsDiv.innerHTML = results;
        
      } catch (error) {
        resultsDiv.innerHTML = `
          <p style="color: #ff9900;">‚ö†Ô∏è Cannot access main page from test frame.</p>
          <p>Please go directly to the main page at <strong>http://localhost:8000/</strong> and test the circular buttons.</p>
          <p>Each button should toggle its corresponding UI area (info panel, search bar, year slider, rotation controls, AI chat).</p>
        `;
      }
    }
    
    // Initial message
    setTimeout(() => {
      document.getElementById('test-summary').innerHTML += '<p style="color: #3a8ef6;">üëÜ Click the buttons above to test the toggle functionality!</p>';
    }, 1000);
  </script>
</body>
</html>